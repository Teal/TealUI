<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>类</title>

    <script type="text/javascript" src="../../src/boot.js"></script>
    <script type="text/javascript" src="../../src/core/base.js"></script>
    <script type="text/javascript" src="../../src/core/class.js"></script>

    <script type="text/javascript" src="../../apps/demo/demo.js"></script>
</head>
<body>

    <article class="demo">
        <blockquote class="demo demo-info">为 JavaScript 提供创建类的功能。创建的类支持单继承、扩展、事件和多态。</blockquote>

        <script>

            Demo.writeExamples({
                '创建最简单的类': function () {

                    // 创建一个类。
                    var Animale = new Class({

                        // 类的一个方法。
                        say: function () {
                            alert("调用了 say 方法");
                        }
                    });

                    // 创建一个类的实例。
                    var ani = new Animale();

                    // 调用 Animale 类的 say 方法。
                    ani.say();

                },
                '定义字段': function () {

                    // 创建一个类。
                    var Animale = new Class({

                        // 类的一个字段。
                        name: "这是 Animate 的字段",

                        // 类的一个方法。
                        say: function () {
                            alert("字段 name 的值是: " + this.name);
                        }
                    });

                    // 创建一个类的实例。
                    var ani = new Animale();

                    ani.name = "ani 实例覆盖了这个字段的值";

                    // 调用 Animale 类的 say 方法。
                    ani.say();

                },
                '定义构造函数': function () {

                    // 创建一个类。
                    var Animale = new Class({

                        // 构造函数。
                        constructor: function (args) {
                            alert("正在执行 Animal 类的构造函数。");
                        }
                    });

                    // 创建一个类的实例。
                    var ani = new Animale();

                },
                '继承': function () {

                    // 创建一个类。
                    var Animale = new Class({

                        // 类的一个方法。
                        say: function () {
                            alert("正在执行 Animale 类的 say 方法");
                        },

                        // 构造函数。
                        constructor: function (args) {
                            alert("正在执行 Animal 类的构造函数。");
                        }
                    });

                    // 创建一个类。
                    var Dog = Animale.extend({

                        // 类的一个方法。
                        say2: function () {
                            alert("正在执行 Dog 类的 say 方法");
                        }

                    });

                    // 创建一个类的实例。
                    var dog = new Dog();

                    // 调用 Animale 类的 say 方法。
                    dog.say();

                    // 调用 Dog 类的 say2 方法。
                    dog.say2();

                },
                '多态类': function () {

                    // 创建一个类。
                    var Animale = new Class({

                        // 类的一个方法。
                        say: function (name) {
                            alert("正在执行 Animale 类的 say 方法: 参数 name=" + name);
                        }

                    });

                    // 创建一个类。
                    var Dog = Animale.extend({

                        // 类的一个方法。
                        say: function () {
                            this.base('say', 'Dog');
                        }

                    });

                    // 创建一个类。
                    var Cat = Animale.extend({

                        // 类的一个方法。
                        say: function () {
                            this.base('say', 'Cat');
                        }

                    });

                    var dog = new Dog();
                    dog.say();

                    var cat = new Cat();
                    cat.say();
                },
                '使用事件的功能': function () {

                    // 创建一个类。
                    var Animale = new Class({

                    });

                    var ani = new Animale();
                    ani.on('needsay', function (name) {
                        alert("needsay事件被触发了， 参数 name=" + name);
                    });

                    ani.trigger('needsay', "触发needsay事件时的参数");

                },
                '定义事件': function () {

                    // 创建一个类。
                    var Animale = new Class({

                    });

                    Animale.addEvents('needsay', {

                        add: function (target, eventName, eventHandler) {
                            alert(eventName + "事件被绑定了一个函数: " + eventHandler);
                        },

                        remove: function (target, eventName, eventHandler) {
                            alert(eventName + "事件被解绑了");
                        },

                        dispatch: function (target, eventName, eventHandler, eventArgs) {
                            alert(eventName + "事件被触发了, 接下来执行用户传入的事件处理函数");

                            eventHandler(eventArgs);
                        }

                    });

                    var ani = new Animale();
                    ani.on('needsay', function (name) {
                        alert("needsay事件被触发了， 参数 name=" + name);
                    });

                    ani.trigger('needsay', "触发needsay事件时的参数");

                },
                '将一个已经定义好的 JavaScript 函数转为一个类': function () {

                    function func() {
                        alert("我是一个已经定义的 func 函数");
                    }

                    // 从一个 Javascript 函数创建一个类。
                    Class.Native(func);

                    var a = new func();

                }
            });

        </script>

    </article>

</body>
</html>
