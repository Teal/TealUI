<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="module-info" content="status=complete" />
    <title>类事件支持</title>

    <script type="text/javascript" src="../../../src/boot.js"></script>
    <script type="text/javascript" src="../../../src/core/base.js"></script>
    <script type="text/javascript" src="../../../src/core/class/base.js"></script>
    <script type="text/javascript" src="../../../src/core/class/event.js"></script>

    <script type="text/javascript" src="../../../apps/demo/demo.js"></script>
</head>
<body>

    <article class="demo">
        <blockquote class="demo demo-info">为类提供事件功能。</blockquote>

        <script>

            Demo.writeExamples({
                '使用事件的功能': function () {

                    // 创建一个类。
                    var Animale = new Class({

                    });

                    var ani = new Animale();
                    ani.on('needsay', function (name) {
                        alert("needsay事件被触发了， 参数 name=" + name);
                    });

                    ani.trigger('needsay', "触发needsay事件时的参数");

                },
                '定义事件': function () {

                    // 创建一个类。
                    var Animale = new Class({

                    });

                    Animale.addEvents('needsay', {

                        add: function (target, eventName, eventHandler) {
                            alert(eventName + "事件被绑定了一个函数: " + eventHandler);
                        },

                        remove: function (target, eventName, eventHandler) {
                            alert(eventName + "事件被解绑了");
                        },

                        dispatch: function (target, eventName, eventHandler, eventArgs) {
                            alert(eventName + "事件被触发了, 接下来执行用户传入的事件处理函数");

                            eventHandler(eventArgs);
                        }

                    });

                    var ani = new Animale();
                    ani.on('needsay', function (name) {
                        alert("needsay事件被触发了， 参数 name=" + name);
                    });

                    ani.trigger('needsay', "触发needsay事件时的参数");

                }
            });

        </script>

    </article>

</body>
</html>
