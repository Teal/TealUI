{"version":3,"file":"function-test.js","sources":["function-test.ts"],"sourcesContent":["import * as assert from \"assert\";\r\nimport * as func from \"./function\";\r\n\r\nexport function emptyTest() {\r\n    assert.ok(func.empty);\r\n}\r\n\r\nexport function selfTest() {\r\n    assert.strictEqual(func.self(1), 1);\r\n}\r\n\r\nexport function fromTest() {\r\n    assert.strictEqual(func.from(false)(), false);\r\n}\r\n\r\nexport function isFunctionTest() {\r\n    assert.strictEqual(func.isFunction(function () { }), true);\r\n    assert.strictEqual(func.isFunction(null), false);\r\n    assert.strictEqual(func.isFunction(new Function()), true);\r\n\r\n    // Make sure that false values return false\r\n    assert.ok(!func.isFunction(null), \"null Value\");\r\n    assert.ok(!func.isFunction(undefined), \"undefined Value\");\r\n    assert.ok(!func.isFunction(\"\"), \"Empty String Value\");\r\n    assert.ok(!func.isFunction(0), \"0 Value\");\r\n\r\n    // Check built-ins\r\n    // Safari uses \"(Internal Function)\"\r\n    assert.ok(func.isFunction(String), \"String Function(\" + String + \")\");\r\n    assert.ok(func.isFunction(Array), \"Array Function(\" + Array + \")\");\r\n    assert.ok(func.isFunction(Object), \"Object Function(\" + Object + \")\");\r\n    assert.ok(func.isFunction(Function), \"Function Function(\" + Function + \")\");\r\n\r\n    // When stringified, this could be misinterpreted\r\n    const mystr = \"function\";\r\n    assert.ok(!func.isFunction(mystr), \"Function String\");\r\n\r\n    // When stringified, this could be misinterpreted\r\n    const myarr = [\"function\"];\r\n    assert.ok(!func.isFunction(myarr), \"Function Array\");\r\n\r\n    // When stringified, this could be misinterpreted\r\n    const myfunction = { \"function\": \"test\" };\r\n    assert.ok(!func.isFunction(myfunction), \"Function Object\");\r\n\r\n    // Make sure normal functions still work\r\n    const fn = function () { };\r\n    assert.ok(func.isFunction(fn), \"Normal Function\");\r\n\r\n    const obj = document.createElement(\"object\");\r\n\r\n    // Firefox says this is a function\r\n    assert.ok(!func.isFunction(obj), \"Object Element\");\r\n\r\n    // IE says this is an object\r\n    // Since 1.3, this isn't supported (#2968)\r\n    // assert.ok( func.isFunction(obj.getAttribute), \"getAttribute Function\" );\r\n\r\n    const nodes = document.body.childNodes;\r\n\r\n    // Safari says this is a function\r\n    assert.ok(!func.isFunction(nodes), \"childNodes Property\");\r\n\r\n    const first = document.body.firstChild;\r\n\r\n    // Normal elements are reported ok everywhere\r\n    assert.ok(!func.isFunction(first), \"A normal DOM Element\");\r\n\r\n    const input = document.createElement(\"input\");\r\n    input.type = \"text\";\r\n    document.body.appendChild(input);\r\n\r\n    // IE says this is an object\r\n    // Since 1.3, this isn't supported (#2968)\r\n    // assert.ok( func.isFunction(input.focus), \"A default function property\" );\r\n\r\n    document.body.removeChild(input);\r\n\r\n    const a = document.createElement(\"a\");\r\n    a.href = \"some-function\";\r\n    document.body.appendChild(a);\r\n\r\n    // This serializes with the word 'function' in it\r\n    assert.ok(!func.isFunction(a), \"Anchor Element\");\r\n\r\n    document.body.removeChild(a);\r\n\r\n    // Recursive function calls have lengths and array-like properties\r\n    function callme(callback: any) {\r\n        function fn(response: any) {\r\n            callback(response);\r\n        }\r\n\r\n        assert.ok(func.isFunction(fn), \"Recursive Function Call\");\r\n\r\n        fn({ some: \"data\" });\r\n    }\r\n\r\n    callme(function () {\r\n        callme(function () { });\r\n    });\r\n}\r\n\r\nexport function concatTest() {\r\n    assert.ok(func.concat(function () { }, function () { }));\r\n}\r\n\r\nexport function repeatTest() {\r\n    let i = 0;\r\n    const fn = func.repeat(() => {\r\n        i++;\r\n    }, 2);\r\n    fn();\r\n    fn();\r\n    assert.strictEqual(i, 4);\r\n}\r\n\r\nexport function onceTest() {\r\n    let i = 0;\r\n    const fn = func.once(() => i++);\r\n    fn();\r\n    fn();\r\n    assert.strictEqual(i, 1);\r\n}\r\n\r\nexport function beforeTest() {\r\n    let i = 0;\r\n    const fn = func.before(() => i++, 2);\r\n    fn();\r\n    assert.strictEqual(i, 1);\r\n    fn();\r\n    assert.strictEqual(i, 1);\r\n    fn();\r\n    assert.strictEqual(i, 2);\r\n}\r\n\r\nexport function afterTest() {\r\n    let i = 0;\r\n    const fn = func.after(() => i++, 2);\r\n    fn();\r\n    assert.strictEqual(i, 0);\r\n    fn();\r\n    assert.strictEqual(i, 1);\r\n    fn();\r\n    assert.strictEqual(i, 1);\r\n    fn();\r\n    assert.strictEqual(i, 2);\r\n}\r\n\r\nexport function limitTest() {\r\n    let i = 0;\r\n    const fn = func.limit(() => i++, 1);\r\n    fn();\r\n    fn();\r\n    assert.strictEqual(i, 1);\r\n}\r\n\r\nexport function cacheTest() {\r\n    let i = 0;\r\n    const fn = func.cache(() => i++);\r\n    fn();\r\n    fn();\r\n    assert.strictEqual(i, 1);\r\n}\r\n\r\nexport function delayTest(done: Function) {\r\n    func.delay(() => {\r\n        assert.ok(true);\r\n        done();\r\n    }, 1)();\r\n}\r\n\r\nexport function deferTest(done: Function) {\r\n    func.defer(() => {\r\n        assert.ok(true);\r\n        done();\r\n    }, 1)();\r\n}\r\n\r\nexport function intervalTest(done: Function) {\r\n    func.interval(count => {\r\n        assert.strictEqual(count, 0);\r\n        done();\r\n    }, 1, 1);\r\n}\r\n\r\nexport function tryTheseTest() {\r\n    assert.strictEqual(func.tryThese(function () { throw new Error(\"x\"); }, function () { return 1; }), 1);\r\n}\r\n\r\nexport function getSourceTest() {\r\n    assert.strictEqual(func.getSource(function (x: any) { return x; }).trim(), \"return x;\");\r\n}\r\n"],"mappings":"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"}